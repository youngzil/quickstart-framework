1. vi显示行数
2. 上下翻一页、半页、一行
3. 文件头文件尾、行头行尾
4. 复制、粘贴、删除




---------------------------------------------------------------------------------------------------------------------


进入vi后 有

1. 编辑模式
2. 命令模式

进入vi后默认是命令模式


---------------------------------------------------------------------------------------------------------------------

### 上下翻一页、半页、一行
^f 往下一页 (forward)
^b 往上一页 (before)

^d 往下半个屏幕(down)
^u 往上半个屏幕(up)

^e 往下滚一行
^y 往上滚一行



### 文件头文件尾、行头行尾
0 至该列开头
$ 至该列尾端
gg 跳至文件头
G 跳至文件尾
10gg 或 10G 跳到第10行



### 复制、粘贴、删除
yy 复制当前行到内存缓冲区
nyy 复制 n 行内容到内存缓冲区
5yy 复制 5 行内容到内存缓冲区

p 小写字母 p，将缓冲区的内容粘贴到光标的后面
P 大写字母 P，将缓冲区的内容粘贴到光标的前面

dd 删除光标所在行，并去除空隙
ndd 删除 n 行内容，并去除空隙
3dd 删除 3 行内容，并去除空隙



### Vim搜索操作


移动到下一个匹配处
按【n】

移动到上一个匹配处
按【N】或【shift】+【n】

搜索选定的关键字
光标移动到关键字任意位置，按【*】



/关键字
```# 向下找（左斜杠+关键字）```

?关键字
```# 向上找（逆向搜索）（问号+关键字）```




特殊字符串搜索转义

比如我们要搜索HTTP/1.1.404

可以使用\转义，但是\V对于/好像不起作用

/HTTP\/1\.1\.404    一个一个转义可以的
/\V1.1.404          \V可以全部转义（但是对于/不起作用， \应该也不起作用）
/\VHTTP\/1.1.404    \V需要把/手动转义


1. 使用 very magic 搜索模式查找  
可以使用 \v 开关激活 very magic 搜索模式，统一所有特殊符号的规则：  
very magic 搜索模式下，除下划线 _、大小写字母以及数字 0 到 9 之外的所有字符都具有特殊含义。

2. 使用 very nomagic 搜索模式查找  
使用原义开关 \V 激活Vim的very nomagic 搜索模式。  
\V 选项会使得其后的模式中有且只有反斜杠 \ 具有特殊意义，即消除了附加在 .、* 以及 ? 等大多数字符上的特殊含义。


对于Vim的正则表达式搜索，一个通用的原则是：如果想按正则表达式查找，就用模式开关 \v，如果想按原义查找文本，就用原义开关 \V。




Vim正则表达式搜索

为了更好的进行搜索，Vim支持正则表达式，最基本的正则表达式规则包括：
^         表示一行的开头
$         表示一行的结尾
.         表示任意一个字符
*         匹配0次或n次

/^test.*$，其中^表示匹配行首、.*表示匹配任意字符、$表示匹配行尾，合起来表示搜索任意以test开头的行。




匹配搜索：

/关键字\>
```#匹配末尾（右斜杠+大于号）```

/\<关键字
```#匹配开头（右斜杠+小于号）```

/\<关键字\>
```#匹配全部（匹配开头和结尾的符号加起来）```



不区分大小写：

:set ignorecase
```#在普通搜索前执行此命令```

:set noignorecase
```#恢复大小写敏感```

如果打开了 ignorecase 选项，那么你也应该设置 :set smartcase。

当 ignorecase 和 smartcase 选项均打开时，只要你的搜索模式中包含大写字母，那Vim会认为你当前的搜索是区分大小写的，如果搜索模式中不包含任何大写字母，Vim则会认为搜索应该不区分大小写。这是个比较”智能的”推测你搜索意图的机制。



高亮搜索

:set hlsearch
```#在普通搜索前执行此命令```



[vim常用搜索技巧](https://www.jianshu.com/p/bdc1f7e689b3)  
[Vim搜索命令使用方法和技巧](https://vimjc.com/vim-search.html)  
[Vim搜索字符转义与very magic搜索模式](https://vimjc.com/vim-very-magic.html)  


---------------------------------------------------------------------------------------------------------------------
### vi显示行数

在vi的命令模式下，输入 :set nu
可以即时显示该文件的行数。
若每次使用vi时都需要显示行数，可以修改vi的配置文件，命令如下：
vi ~/.vimrc
进入该配置文件，输入 set nu
则每次使用vi都可显示行数



### 命令模式下的行操作

数值用来指定绝对行号；  
字符“.”表示光标所在行的行号；  
字符“$”表示正文最后一行的行号；  
简单的表达式，例如“.+5”表示当前行往下的第 5 行。

:n 将光标移到第 n 行

操作行内容写入其他文件
:345 将光标移到第 345 行
:345w file 将第 345 行写入 file 文件
:3,5w file 将第 3 行至第 5 行写入 file 文件
:1,.w file 将第 1 行至当前行写入 file 文件
:.,$w file 将当前行至最后一行写入 file 文件
:.,.+5w file 从当前行开始将 6 行内容写入 file 文件
:1,$w file 将所有内容写入 file 文件，相当于 :w file 命令
:w file 将编辑的内容写入 file 文件，保持原有文件的内容不变


在命令模式下，同样可以删除正文中的内容。例如：
:d 删除光标所在行
:3d 删除 3 行
:.,$d 删除当前行至正文的末尾


---------------------------------------------------------------------------------------------------------------------


参考  
[linux 中vi命令](https://blog.csdn.net/hzw05103020/article/details/49281483)  



